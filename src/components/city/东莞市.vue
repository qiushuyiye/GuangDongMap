<template>
    <div>
        <div class="guangdongMap">
            <!-- 地图 -->
            <div class="svgC">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" baseProfile="full" width="953" height="640"
                    style="user-select: none; position: absolute; left: 0px; top: 0px;margin-left: -10vw;margin-top: -3vw;">
                    <g @click="handleCityClick('广东省')">
                        <rect width="953" height="640" x="0" y="0" id="0" style="fill: transparent;"></rect>
                    </g>
                    <g>
                        <path id="东莞市" @click="handleCityClick('东莞市')"
                            d="M 740.2001 408.858 L 729.6051 413.8352 L 723.0195 432.5289 L 709.5507 436.7875 L 702.4269 447.1868 L 707.994 452.7733 L 703.3846 458.0839 L 718.2305 458.5817 L 719.8474 468.6498 L 729.6051 489.0108 L 724.0373 495.5951 L 723.678 510.7571 L 714.8186 515.4053 L 716.9737 523.9288 L 713.7414 546.7873 L 707.6354 553.5966 L 707.6354 561.0693 L 695.9023 573.5817 L 682.6124 558.4124 L 689.1972 562.1212 L 691.9514 546.1791 L 679.7387 536.3266 L 674.4708 524.814 L 674.1717 511.3101 L 656.452 509.1522 L 653.0401 501.8482 L 644.8986 502.1242 L 638.0747 476.8931 L 627.0595 473.4083 L 619.5771 483.4774 L 611.6152 467.8207 L 599.7626 467.2667 L 600.0618 451.9433 L 592.3397 459.0795 L 588.6879 456.5352 L 575.159 463.3392 L 563.4852 459.9648 L 557.4996 451.8329 L 554.0275 421.6881 L 549.1182 418.0939 L 541.6359 423.5138 L 544.2698 415.1079 L 539.6003 408.9142 L 526.0112 406.2043 L 525.7121 400.0105 L 512.6018 387.846 L 491.5898 390.6663 L 486.8609 380.1056 L 478.3007 373.8026 L 482.6703 364.1282 L 473.1524 360.9766 L 469.9795 369.269 L 465.6099 365.178 L 461.659 383.0905 L 449.5064 387.9564 L 445.0166 382.8697 L 437.3546 386.5191 L 432.0266 398.7941 L 435.1995 401.504 L 434.0021 420.9694 L 424.424 429.2659 L 415.4443 431.8655 L 413.5892 440.162 L 406.7044 437.6728 L 406.4053 445.7485 L 398.5636 455.5947 L 397.7849 470.4203 L 375.5762 487.6267 L 367.016 510.0374 L 362.7651 498.9154 L 353.1871 488.1808 L 345.5251 486.1884 L 325.0521 487.0737 L 309.7867 498.8602 L 286.3205 461.7353 L 258.1847 419.5322 L 236.2752 389.2832 L 226.2183 366.5601 L 229.2717 329.9122 L 220.831 310.5697 L 210.0555 280.0687 L 203.2309 255.927 L 193.4138 231.7333 L 188.5647 201.802 L 188.5045 174.8025 L 195.5689 160.5591 L 204.7876 148.7465 L 208.858 134.4511 L 214.6047 128.9874 L 238.1311 122.199 L 249.8041 114.2525 L 256.8677 105.5331 L 280.1544 105.4227 L 282.0704 95.4359 L 288.7747 89.3661 L 296.557 90.7451 L 297.1561 97.5324 L 303.9206 92.3458 L 317.3292 88.8693 L 340.0776 68.953 L 356.9591 66.4159 L 369.0508 78.6628 L 387.3093 77.063 L 398.1442 80.6489 L 416.4028 80.5385 L 437.0555 92.6218 L 439.869 82.8006 L 442.5623 91.849 L 454.3556 94.2215 L 464.7718 84.1795 L 479.0193 97.698 L 487.3999 93.7247 L 513.0213 101.6151 L 532.0578 94.6631 L 538.1638 95.6015 L 550.5554 107.4099 L 555.9428 117.1218 L 569.1725 126.7243 L 584.4973 125.7307 L 600.0618 112.0997 L 612.633 107.9608 L 630.6518 115.521 L 632.6866 133.0711 L 641.0078 152.5552 L 655.6741 163.596 L 678.542 187.8877 L 679.1403 193.7398 L 669.9216 189.1573 L 658.3681 219.8593 L 664.414 219.4177 L 669.0835 227.7569 L 682.792 231.1813 L 685.0073 236.2075 L 700.7507 224.8855 L 703.5642 218.3679 L 717.6923 227.4809 L 727.15 226.3207 L 734.8729 233.6663 L 736.0102 251.3966 L 726.2525 261.5615 L 727.5695 288.135 L 740.6196 302.4461 L 752.7714 305.5404 L 755.8248 312.3933 L 763.607 311.4539 L 764.5045 318.1403 L 757.8002 334.0573 L 752.4129 338.0368 L 746.2467 332.4545 L 741.7569 338.2576 L 744.5705 356.3337 L 743.2535 377.8383 L 745.2289 380.3816 L 743.8518 404.2681 L 740.2001 408.858 Z"
                            fill="#FFF" fill-opacity="1" stroke="#666" stroke-width="1" paint-order="fill"
                            stroke-opacity="1" stroke-dasharray="" stroke-linecap="butt" stroke-linejoin="miter"
                            stroke-miterlimit="10" transform="matrix(1,0,0,1,0,0)" clip-path="none">
                            <title>东莞市</title>
                        </path>
                    </g>
                </svg>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import store from '../../store';

function getdata() {
    let list = store.state.mapList
    list.forEach(item => {
        maps(item.mapName, item.color)
        if(item.children){
            item.children.forEach(child => {
                maps(child.mapName, child.color)
            });
        }
    })
}

function maps(mapName, rgbS) {
    const path = document.getElementById(mapName);
    if (path) {
        if (path.style.fill != rgbS)
            path.style.fill = rgbS
        else
            path.style.fill = ''
    }
};

function handleCityClick(cityName) {
    store.state.selectedMapComponent = cityName
}

onMounted(() => {
    getdata()
})

</script>

<style scoped>
.guangdongMap {
    width: 100%;
    display: flex;
    flex-wrap: wrap;
}

.svgC {
    width: 780px;
    height: 640px;
    position: relative;
    margin-right: -8vw;
}
</style>